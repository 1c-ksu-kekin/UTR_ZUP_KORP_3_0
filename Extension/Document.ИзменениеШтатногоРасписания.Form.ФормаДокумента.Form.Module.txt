
&НаКлиенте
Процедура ЮТР_ПозицииПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	
	Отказ = Истина;
	
	Если ЮТР_УправлениеРаботойТиповыхФормВызовСервера.ОпределитьДоступностьРоли("ЮТР_ДобавлениеИзменениеШтатногоРасписания,ЮТР_ДобавлениеИзменениеШтатногоРасписанияИзменениеТерритории") Тогда
		ПоказатьПредупреждение(, НСтр("ru = 'Недостаточно прав на выполнение данной операции.'"));
		Возврат;
	КонецЕсли;	

	Если Копирование Тогда
		ПредыдущаяСтрока = Элемент.ТекущиеДанные
	КонецЕсли; 
	
	НоваяСтрокаПозиции = Объект.Позиции.Добавить();
	ИдентификаторТекущейПозиции = НоваяСтрокаПозиции.ПолучитьИдентификатор();
	Элемент.ТекущаяСтрока = ИдентификаторТекущейПозиции;
	
	Если Копирование Тогда
		ЗаполнитьЗначенияСвойств(НоваяСтрокаПозиции, ПредыдущаяСтрока);
		ТекущаяДолжность = Элемент.ТекущиеДанные.Должность;
	КонецЕсли; 
	
	УправлениеШтатнымРасписаниемКлиент.ПозицииПриНачалеРедактирования(ЭтаФорма, Истина, Копирование);
	Если Копирование Тогда
		СкопироватьДанныеПозиции(ИдентификаторТекущейПозиции, ПредыдущаяСтрока.ПолучитьИдентификатор());
	КонецЕсли;
	
	УправлениеШтатнымРасписаниемКлиент.ГрафикРаботыСотрудников(ЭтаФорма, Объект.Организация, Элемент.ТекущиеДанные.Подразделение);
		
	ОткрытьДанныеПозиции(Элемент.ТекущаяСтрока);
	
	УстановитьВыполнениеОбработчиковСобытия(Ложь);

КонецПроцедуры

&НаКлиенте
Процедура ЮТР_ВидДокументаНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	СтруктураОтбор = Новый Структура;
	СтруктураОтбор.Вставить("ВидДокумента", "ИзменениеШтатногоРасписания");
	ПараметрыОткрытия = Новый Структура;
	ПараметрыОткрытия.Вставить("Отбор", СтруктураОтбор);
	ОткрытьФорму("Справочник.ЮТР_ВидыДокументаКадровоеИзменение.ФормаВыбора", ПараметрыОткрытия, ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ЮТР_ОбработкаВыбора(ВыбранноеЗначение, ИсточникВыбора)
	
	ЮТР_ОбработкаВыбораНаСервере(ВыбранноеЗначение);
	
КонецПроцедуры

&НаСервере
Процедура ЮТР_ОбработкаВыбораНаСервере(ВыбранноеЗначение)
	
	Объект.ЮТР_ВидДокумента = ВыбранноеЗначение;
	
КонецПроцедуры





